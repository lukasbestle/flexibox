/* Flexibox 0.9.2 (09.03.2014) | https://github.com/vis7mac/flexibox | (c) Lukas Bestle */
var Flexibox=function(h,d){var e=this,f,c,l,m,n,k;this.options={stage:".lightboxstage",title:"span",image:"img",activeClass:"active",openCallback:null,closeCallback:null,scrolling:!0,debug:!1};if("object"===typeof d)for(f in d)d.hasOwnProperty(f)&&(this.options[f]=d[f]);c=document.querySelector(this.options.stage);h=Array.prototype.slice.call(h);l=c.innerHTML;window.flexibox={};this.active=window.flexibox.active=!1;this.data={image:null,title:null};this.open=function(a,b){var g;if(window.flexibox.active)return this.options.debug&&
console.log("[Flexibox] Lightbox is already open!"),!1;if(this.options.openCallback&&!this.options.openCallback(a,b,c))return this.options.debug&&console.log('[Flexibox] Callback aborted opening the lightbox with image "'+a+'" and title "'+b+'".'),!1;c.innerHTML=l;this.active=window.flexibox.active=!0;this.data={image:a,title:b};g=c.querySelector(this.options.image);g.src=a;g.title=b;c.querySelector(this.options.title).innerHTML=b;this.options.scrolling&&(document.body.style.overflow="hidden");
m(c,this.options.activeClass);this.options.debug&&console.log('[Flexibox] Opened lightbox with image "'+a+'" and title "'+b+'".');return!0};this.close=function(a){if(!window.flexibox.active)return this.options.debug&&console.log("[Flexibox] Lightbox is not open!"),!1;if(this.options.closeCallback&&!this.options.closeCallback(c,a))return this.options.debug&&console.log("[Flexibox] Callback aborted closing the lightbox."),!1;this.active=window.flexibox.active=!1;this.data={image:null,title:null};this.options.scrolling&&
(document.body.style.overflow=null);n(c,this.options.activeClass);this.options.debug&&console.log("[Flexibox] Closed lightbox.");return!0};m=function(a,b){a.className+=(a.className?" ":"")+b};n=function(a,b){a.className=a.className.replace(RegExp("(\\s|^)"+b+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")};k=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c]))};k(c,"click",function(a){if(!e.active)return!1;
(e.options.closeCallback||a.target===c)&&e.close(a)});h.forEach(function(a){k(a,"click",function(b){e.open(a.href,a.title);b.preventDefault()})})};
